<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login | Isch's Website</title>
<style>
:root{
  --bg:#0b0f14; --surface:#101720; --accent:#7c5cff; --muted:#9aa2ad; --radius:14px; --shadow:0 10px 30px rgba(0,0,0,.5);
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,Arial,sans-serif;}
body{height:100vh; display:flex; justify-content:center; align-items:center; background:var(--bg); color:#e6eef6; opacity:0; transition:opacity .7s ease;}
.login-box{background:var(--surface); padding:30px; border-radius:var(--radius); width:350px; box-shadow:var(--shadow); text-align:center;}
h2{margin-bottom:20px;}
input{width:100%; padding:12px; margin-bottom:12px; border-radius:10px; border:none; background:#071014; color:#fff;}
.pw-row{display:flex; gap:10px;}
.pw-input{flex:1;}
#togglePw{padding:12px; height:40px; width:65px; border:none; border-radius:10px; background:#071014; color:var(--muted); cursor:pointer; font-weight:700;}
#loginBtn{width:100%; padding:12px; border:none; border-radius:10px; background:linear-gradient(90deg,var(--accent),#3fc1ff); color:#051022; font-weight:800; cursor:pointer;}
#errorMsg{display:none; color:#f66; margin-top:10px;}
</style>
</head>
<body>

<div class="login-box">
  <h2>Sign In</h2>

  <input id="username" type="text" placeholder="Username" required>

  <div class="pw-row">
    <div class="pw-input">
      <input id="password" type="password" placeholder="Password" required>
    </div>
    <button id="togglePw">Show</button>
  </div>

  <button id="loginBtn">Login</button>

  <p id="errorMsg">Incorrect username or password</p>
</div>

<script>
// Fade in
window.onload = () => document.body.style.opacity = "1";

// Show/hide password
const pw = document.getElementById("password");
const toggle = document.getElementById("togglePw");
toggle.onclick = () => {
  pw.type = pw.type === "password" ? "text" : "password";
  toggle.textContent = pw.type === "password" ? "Show" : "Hide";
};

// Login via API
document.getElementById("loginBtn").onclick = async () => {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();

  try {
    const res = await fetch("https://loginapi-hp9k.onrender.com/api/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username, password })
    });

    if (res.ok) {
      const data = await res.json();
      sessionStorage.setItem("token", data.token);
      window.location.href = "home.html";
    } else {
      document.getElementById("errorMsg").style.display = "block";
    }
  } catch {
    document.getElementById("errorMsg").style.display = "block";
  }
};
</script>

</body>
</html>
